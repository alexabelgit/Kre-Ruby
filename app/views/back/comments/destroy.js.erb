<%= render 'shared/system_messages/replace_flash' %>

<% view = @comment.persisted? ? escape_javascript(render 'back/comments/show', comment: @comment, commentable: @comment.commentable) :
                                escape_javascript(render 'back/comments/form', comment: Comment.new(commentable: @comment.commentable)) %>

jQuery('[data-model="<%= @comment.commentable_type.parameterize %>"][data-id="<%= @comment.commentable.hashid %>"] [data-model="comment"]')
        .replaceWith('<%= view %>').fade_out_system_message();
